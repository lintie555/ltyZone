<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>世界上没有第二个如你一般的人</title>
		<link rel="stylesheet" href="./css/reset.css" />
		<link rel="stylesheet" href="./css/donghua.css" />
		<link rel="stylesheet" href="./css/home.css" />
		<script src="./js/vue.min.js"></script>
	</head>

	<body>
		<div id="app" class="main">
			<div class="hTopMune flexSb">
				<div class="flexSt">
					<div class="userBox flexSt">
						<img class="userHeaderPic" src="./images/icon002.gif" alt="">
						<div class="ueser mhover2">啊屁股</div>
					</div>
					<ul class="flexSt">
						<li class="mhover2">开始</li>
						<li class="mhover2">编辑</li>
						<li class="mhover2" @click="openApp('关于')">关于</li>
					</ul>
				</div>
				<div class="flexSt">
					<img class="hTopMuneTb mhover2" src="./images/icon-zhifubao.png" alt="" title="支付宝" @click="openApp('支付宝')">
					<img class="hTopMuneTb mhover2" src="./images/icon-weChat.png" alt="" title="微信" @click="openApp('微信')">
					<img class="hTopMuneTb mhover2" src="./images/icon-kaifa.png" alt="" title="开发内测">
					<img class="hTopMuneTb mhover2" src="./images/icon-wangluo.png" alt="" title="网络">
					<div class="flexSt hTopMuneTb mhover2">
						<p>80%</p>
						<img src="./images/icon-dianlian.png" alt="" title="电量">
					</div>
					<div>{{timeDiv}}</div>
				</div>
			</div>
			
			<!-- 'left:' + item.left + 'px;top:' + item.top + 'px';width:' + item.width + 'px';height:' + item.height + 'px;' -->
			
			
			<div class="hBgBox" style="background-image: url(./images/hbg001.jpg);">
				
				<div class="homeBox ripple zoomIn" v-for="(item,index) in homeAppList"
				 :class="{ 'zIndex3': seleHomeAppName ==item.appName, 'homeAppBigShow2': homeAppBig == item.appName,'yanshi':!flags }"
				 :style="{left:item.left+'px',top:item.top+'px',width:item.width+'px',height:item.height+'px'}"
				 @click="seleHomeApp(item.appName)"
				 v-if="item.appShow">
					<div class="homeBoxTopNav flexSb"
						@mousedown="down(index)" @touchstart="down(index)"
						@mousemove="move(index)" @touchmove.prevent="move(index)"   
						@mouseup="end(index)" @touchend="end(index)"
					>
						<div>{{item.appName}}</div>
						<div>
							<img class="homeBoxTb mhover2" src="./images/icon-toBig.png" alt="" title="窗口大小" @click="homeAppBigShowBtn(item.appName)">
							<img class="homeBoxTb mhover2" src="./images/icon-close.png" alt="" title="关闭" @click="closeApp(item.appName)">
						</div>
					</div>
					<iframe class="homeBoxCom" :src="item.appUrl" frameborder="0" scrolling="auto"></iframe>
				</div>
				
				
			</div>
			
			
			<div class="hMoreAppBox clearfix ripple slideInUp" v-show="hMoreAppBox" @click="hMoreAppBox = !hMoreAppBox">
				<div class="hdlAPP fl mhover1" v-for="(item,index) in homeAppList" @click.stop="openApp(item.appName)">
					<img :src="item.appTb" alt="">
					<p class="ellipsis_1">{{item.appName}}</p>
				</div>
			</div>
			
			
			
			
			
			
			<div class="hBottomMune ripple slideInUp" v-show="homeAppBig ==''">
				<div class="hdlAPP mhover1 fl" @click="hMoreAppBox = !hMoreAppBox">
					<img src="./images/icon001.gif" alt="">
					<p class="ellipsis_1">更多应用</p>
				</div>
				<div class="hdlAPP mhover1 fl" v-for="(item,index) in homeAppList" v-if="index<11" @click="openApp(item.appName)">
					<img :src="item.appTb" alt="">
					<p class="ellipsis_1">{{item.appName}}</p>
				</div>
			</div>
			
			
			
			
			
			
			
		</div>

		<script>
			var app = new Vue({
				el: '#app',
				data: {
					hMoreAppBox:false,
					seleHomeAppName:"",
					homeAppBig:"",
					timeDiv:"0000年00月00日  00:00:00",
					flags: false,
					position: { x: 0, y: 0 },
					nx: '', ny: '', dx: '', dy: '', xPum: '', yPum: '',
					
					homeAppList:[
						{
							id:"tukuBox",
							appShow:false,
							appName:"图库",
							appTb:"./images/icon002.gif",
							appUrl:"./homeHtml/tukuBox.html",
							left:100,
							top:30,
							width:380,
							height:500,
						},
						{
							id:"zhifubaoBox",
							appShow:false,
							appName:"支付宝",
							appTb:"./images/appTbzhifubao.png",
							appUrl:"./homeHtml/zhifubaoBox.html",
							left:200,
							top:100,
							width:280,
							height:420,
						},
						{
							id:"weixinBox",
							appShow:false,
							appName:"微信",
							appTb:"./images/appTbweixn.png",
							appUrl:"./homeHtml/weixinBox.html",
							left:120,
							top:50,
							width:280,
							height:420,
						},
						{
							id:"zwdzjsBox",
							appShow:false,
							appName:"植物大战僵尸",
							appTb:"./images/gameTbzwdzjs.jpg",
							appUrl:"./homeHtml/gameZwdzjs/index.html",
							left:40,
							top:10,
							width:910,
							height:644,
						},
						{
							id:"newsBox",
							appShow:false,
							appName:"新闻",
							appTb:"./images/appTb001.jpg",
							appUrl:"./homeHtml/newsBox.html",
							left:160,
							top:90,
							width:380,
							height:500,
						},
						{
							id:"aboutBox",
							appShow:true,
							appName:"关于",
							appTb:"./images/appTb001.jpg",
							appUrl:"./homeHtml/aboutBox.html",
							left:180,
							top:110,
							width:380,
							height:500,
						},
					]
				},
				mounted() {
					this.start()
				},
				methods: {
					seleHomeApp(name){
						this.seleHomeAppName = name
					},
					openApp(name){
						this.hMoreAppBox = false
						for(var i=0;i<this.homeAppList.length;i++){
							if(this.homeAppList[i].appName == name){
								this.homeAppList[i].appShow = true
							}
						}
						this.seleHomeAppName = name
					},
					closeApp(name){
						for(var i=0;i<this.homeAppList.length;i++){
							if(this.homeAppList[i].appName == name){
								this.homeAppList[i].appShow = false
								this.homeAppBig = ""
							}
						}
					},
					homeAppBigShowBtn(name){
						if(this.homeAppBig == name){
							this.homeAppBig = ""
						}else{
							this.homeAppBig = name
						}
					},
					
					
					//判断时间是否为个位数，如果时间为个位数就在时间之前补上一个“0”
					check(val) {
						if (val < 10) {
							return ("0" + val);
						} 
						else {
							return (val);
						}
					},
					displayTime() {
						//获取系统当前的年、月、日、小时、分钟、毫秒
						var date = new Date();
						var year = date.getFullYear();
						var month = date.getMonth() + 1;
						var day = date.getDate();
						var hour = date.getHours();
						var minutes = date.getMinutes();
						var second = date.getSeconds();
						var timestr = year + "年" + month + "月" + day + "日  " + this.check(hour)
								+ ":" + this.check(minutes) + ":" + this.check(second);
						//将系统时间设置到div元素中
						this.timeDiv = timestr;
					},
					//每隔1秒调用一次displayTime函数
					start(){
						setInterval(this.displayTime,1000)//单位是毫秒
					},


					// 实现移动端拖拽
					  down(index){
						 var app = this.homeAppList[index]
					    this.flags = true;
					    var touch;
					    if(event.touches){
					        touch = event.touches[0];
					    }else {
					        touch = event;
					    }
					    this.position.x = touch.clientX;
					    this.position.y = touch.clientY;
					    this.dx = app.left;
					    this.dy = app.top;
					  },
					  move(index){
					    if(this.flags){
							var app = this.homeAppList[index]
					      var touch ;
					      if(event.touches){
					          touch = event.touches[0];
					      }else {
					          touch = event;
					      }
					      this.nx = touch.clientX - this.position.x;
					      this.ny = touch.clientY - this.position.y;
					      this.xPum = this.dx+this.nx;
					      this.yPum = this.dy+this.ny;
					      app.left = this.xPum;
					      app.top = this.yPum;
					      //阻止页面的滑动默认事件；如果碰到滑动问题，1.2 请注意是否获取到 touchmove
					      document.addEventListener("touchmove",function(){
					          event.preventDefault();
					      },false);
					    }
					  },
					//鼠标释放时候的函数
					  end(){
					    this.flags = false;
					  },
				}
			})
		</script>
	</body>
</html>
